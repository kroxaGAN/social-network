"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[848],{6848:function(e,t,s){s.r(t),s.d(t,{default:function(){return T}});var n=s(8683),i=s(5671),o=s(3144),r=s(136),a=s(5716),l=s(8381),u={},c=s(885),d="ProfileInfo_descriptionBlock__9K+Vy",h="ProfileInfo_imgWrapper__4eBmV",p="ProfileInfo_mainPhoto__THmpN",f="ProfileInfo_contact__+n16a",x=s(1691),v=s(9343),j=function(e){var t=(0,l.useState)(!1),s=(0,c.Z)(t,2),n=s[0],i=s[1],o=(0,l.useState)(e.status),r=(0,c.Z)(o,2),a=r[0],u=r[1],d=function(t){i(t),t||e.updateUserStatus(a)};return(0,l.useEffect)((function(){u(e.status)}),[e.status]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{children:n?(0,v.jsx)("input",{onChange:function(e){u(e.currentTarget.value)},onBlur:function(){return d(!1)},autoFocus:!0,value:a}):(0,v.jsx)("div",{children:(0,v.jsx)("span",{onDoubleClick:function(){return d(!0)},children:(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status"}),":  ",a||" No status"]})})})})})},m=s(1124),b=s(5783),g="ProfileDataForm_error__NLIQm",k="ProfileDataForm_contacts__-alPG",w=function(e){var t=(0,b.TA)({initialValues:{fullName:e.profile.fullName,lookingForAJobDescription:e.profile.lookingForAJobDescription,lookingForAJob:e.profile.lookingForAJob,aboutMe:"About me",github:e.profile.contacts.github,vk:e.profile.contacts.vk,facebook:e.profile.contacts.facebook,instagram:e.profile.contacts.instagram,twitter:e.profile.contacts.twitter,website:e.profile.contacts.website,youtube:e.profile.contacts.youtube,mainLink:e.profile.contacts.mainLink},onSubmit:function(t,s){var i=(0,n.Z)((0,n.Z)({},t),{},{userId:e.profile.userId,contacts:{github:t.github,vk:t.vk,facebook:t.facebook,instagram:t.instagram,twitter:t.twitter,website:t.website,youtube:t.youtube,mainLink:t.mainLink}});e.saveUser(i,s.setStatus).then((function(){e.setEditMode(!1)})).catch((function(){}))}});return(0,v.jsx)("div",{children:(0,v.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name"}),":",(0,v.jsx)("input",{id:"fullName",name:"fullName",type:"text",onChange:t.handleChange,value:t.values.fullName})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job"}),":",(0,v.jsx)("input",{name:"lookingForAJob",type:"checkbox",onChange:t.handleChange,checked:t.values.lookingForAJob})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"}),":",(0,v.jsx)("input",{name:"lookingForAJobDescription",type:"text",onChange:t.handleChange,value:t.values.lookingForAJobDescription})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me"}),":",(0,v.jsx)("input",{name:"aboutMe",type:"text",onChange:t.handleChange,value:t.values.aboutMe})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),":",(0,v.jsxs)("div",{className:k,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"github"}),":",(0,v.jsx)("input",{name:"github",type:"text",onChange:t.handleChange,value:t.values.github})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"vk"}),":",(0,v.jsx)("input",{name:"vk",type:"text",onChange:t.handleChange,value:t.values.vk})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"facebook"}),":",(0,v.jsx)("input",{name:"facebook",type:"text",onChange:t.handleChange,value:t.values.facebook})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"instagram"}),":",(0,v.jsx)("input",{name:"instagram",type:"text",onChange:t.handleChange,value:t.values.instagram})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"twitter"}),":",(0,v.jsx)("input",{name:"twitter",type:"text",onChange:t.handleChange,value:t.values.twitter})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"website"}),":",(0,v.jsx)("input",{name:"website",type:"text",onChange:t.handleChange,value:t.values.website})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"youtube"}),":",(0,v.jsx)("input",{name:"youtube",type:"text",onChange:t.handleChange,value:t.values.youtube})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"mainLink"}),":",(0,v.jsx)("input",{name:"mainLink",type:"text",onChange:t.handleChange,value:t.values.mainLink})]})]})]}),(0,v.jsx)("div",{className:g,children:t.status&&t.status.error.map((function(e,t){return(0,v.jsx)("p",{children:e},t)}))}),(0,v.jsx)("button",{type:"submit",children:"Save"})]})})},P=function(e){var t=(0,l.useState)(!1),s=(0,c.Z)(t,2),n=s[0],i=s[1];if(!e.profile)return(0,v.jsx)(x.p,{});return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:h,children:(0,v.jsx)("img",{src:"https://images.unsplash.com/photo-1574217013471-c32c6846cef7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Zm90b3xlbnwwfHwwfHw%3D&w=1000&q=80",alt:"logo"})}),(0,v.jsxs)("div",{className:d,children:[(0,v.jsx)("div",{children:"ava + description"}),(0,v.jsx)("img",{src:e.profile.photos.large||m,alt:"img",className:p}),(0,v.jsx)("div",{children:e.isOwner&&(0,v.jsx)("input",{type:"file",onChange:function(t){var s;null!==(s=t.currentTarget.files)&&void 0!==s&&s.length&&e.savePhotos(t.currentTarget.files[0])}})}),n?(0,v.jsx)(w,{profile:e.profile,setEditMode:i,saveUser:e.saveUser}):(0,v.jsx)(y,{profile:e.profile,setEditMode:i,isOwner:e.isOwner}),(0,v.jsx)("div",{}),(0,v.jsx)(j,{status:e.status,updateUserStatus:e.updateUserStatus})]})]})},y=function(e){return(0,v.jsxs)("div",{children:[(0,v.jsxs)("span",{children:[(0,v.jsx)("b",{children:"Full name"}),": ",e.profile.fullName,e.isOwner&&(0,v.jsx)("button",{onClick:function(){e.setEditMode(!0)},children:"Edit"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Lookig for a job"}),": ",e.profile.lookingForAJob?"yes":"no"]}),(0,v.jsx)("div",{children:e.profile.lookingForAJob&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"My professional skills"})," : ",e.profile.lookingForAJobDescription]})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),":",Object.keys(e.profile.contacts).map((function(t){return(0,v.jsx)(C,{contactTitle:t,contactValue:e.profile.contacts[t]},t)}))]})]})},C=function(e){return(0,v.jsxs)("div",{className:f,children:[(0,v.jsx)("b",{children:e.contactTitle}),": ",""===e.contactValue?"-----":e.contactValue]})},N=s(1378),_="MyPosts_postsBlock__-0me1",A={item:"Post_item__Dz3Yo"},U=function(e){return(0,v.jsx)("div",{className:A.content,children:(0,v.jsx)("div",{children:(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:A.item,children:[(0,v.jsx)("img",{src:"https://trikky.ru/wp-content/blogs.dir/1/files/2020/08/17/2859972401.jpg",alt:"ava"}),e.message,(0,v.jsx)("div",{children:(0,v.jsx)("span",{children:e.countLikes})})]})})})})},S=(0,l.memo)((function(e){var t=e.posts.map((function(e){return(0,v.jsx)(U,{message:e.message,countLikes:e.countLikes},e.id)}));return console.log("RENDER"),(0,v.jsxs)("div",{className:_,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)("div",{children:(0,v.jsx)(F,{addNewPost:function(t){e.addNewPostAC(t)}})}),t]})})),F=function(e){var t=(0,b.TA)({initialValues:{newPost:""},validate:function(e){var t={};return e.newPost?e.newPost.length>10&&(t.newPost="Must be 10 characters or less"):t.newPost="Required",t},onSubmit:function(s){e.addNewPost(s.newPost),t.resetForm()}});return console.log(t.errors),(0,v.jsxs)("form",{onSubmit:t.handleSubmit,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("input",{name:"newPost",type:"text",onChange:t.handleChange,onBlur:t.handleBlur,value:t.values.newPost}),t.errors.newPost&&t.touched.newPost&&(0,v.jsx)("div",{style:{color:"red"},children:t.errors.newPost})]}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",disabled:0!==Object.keys(t.errors).length,children:"Add new post"})})]})},M=s(440),D=(0,M.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(){e((0,N.Pi)())},updateNewPostText:function(t){e((0,N.fx)(t))},addNewPostAC:function(t){e((0,N.EQ)(t))}}}))(S),I=function(e){return(0,v.jsxs)("div",{className:u.content,children:["Main content",(0,v.jsx)(P,{profile:e.profile,status:e.status,updateUserStatus:e.updateUserStatus,isOwner:e.isOwner,savePhotos:e.savePhotos,saveUser:e.saveUser}),e.isAuth&&(0,v.jsx)(D,{}),!e.isAuth&&(0,v.jsx)("h1",{children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0438 \u0432\u0445\u043e\u0434"})]})},L=s(104),Z=s(4479),J=function(e){(0,r.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,i.Z)(this,s),t.apply(this,arguments)}return(0,o.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;void 0===e&&((e=this.props.authorizedUserId)||this.props.history.push("/login")),this.props.getUserProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)("div",{children:(0,v.jsx)(I,(0,n.Z)((0,n.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,isOwner:!this.props.match.params.userId,isAuth:this.props.isAuth,updateUserStatus:this.props.updateUserStatus,savePhotos:this.props.savePhotos,saveUser:this.props.saveUser}))})}}]),s}(l.Component),T=(0,Z.qC)((0,M.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,isAuth:e.auth.isAuth,authorizedUserId:e.auth.id}}),{getUserProfile:N.et,getUserStatus:N.Tq,updateUserStatus:N.OL,savePhotos:N.kI,saveUser:N.JR}),L.EN)(J)}}]);
//# sourceMappingURL=848.17a2c9c5.chunk.js.map