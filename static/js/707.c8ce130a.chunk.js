"use strict";(self.webpackChunksamurai_way=self.webpackChunksamurai_way||[]).push([[707],{8707:function(s,e,t){t.r(e),t.d(e,{default:function(){return Z}});var r=t(8683),n=t(5671),i=t(3144),o=t(136),a=t(5716),u=t(8381),l={},c="ProfileInfo_descriptionBlock__9K+Vy",p="ProfileInfo_imgWrapper__4eBmV",d="ProfileInfo_mainPhoto__THmpN",h=t(1691),f=t(885),x=t(9343),m=function(s){var e=(0,u.useState)(!1),t=(0,f.Z)(e,2),r=t[0],n=t[1],i=(0,u.useState)(s.status),o=(0,f.Z)(i,2),a=o[0],l=o[1],c=function(e){n(e),e||s.updateUserStatus(a)};return(0,u.useEffect)((function(){l(s.status)}),[s.status]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)("div",{children:r?(0,x.jsx)("input",{onChange:function(s){l(s.currentTarget.value)},onBlur:function(){return c(!1)},autoFocus:!0,value:a}):(0,x.jsxs)("div",{children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",(0,x.jsx)("span",{onDoubleClick:function(){return c(!0)},children:a||" No status"})]})})})},j=t(1124),v=function(s){if(!s.profile)return(0,x.jsx)(h.p,{});return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:p,children:(0,x.jsx)("img",{src:"https://images.unsplash.com/photo-1574217013471-c32c6846cef7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8MXx8Zm90b3xlbnwwfHwwfHw%3D&w=1000&q=80",alt:"logo"})}),(0,x.jsxs)("div",{className:c,children:["ava + description",(0,x.jsx)("img",{src:s.profile.photos.large||j,alt:"img",className:d}),s.isOwner&&(0,x.jsx)("input",{type:"file",onChange:function(e){var t;null!==(t=e.currentTarget.files)&&void 0!==t&&t.length&&s.savePhotos(e.currentTarget.files[0])}}),(0,x.jsx)("h3",{children:s.profile.fullName}),(0,x.jsxs)("div",{children:[(0,x.jsx)("input",{type:"checkbox",value:"\u0438\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443",checked:s.profile.lookingForAJob}),"\u0438\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443"]}),(0,x.jsx)(m,{status:s.status,updateUserStatus:s.updateUserStatus}),(0,x.jsx)("input",{type:"text",value:s.profile.lookingForAJobDescription})]})]})},P=t(1378),g="MyPosts_postsBlock__-0me1",w={item:"Post_item__Dz3Yo"},k=function(s){return(0,x.jsx)("div",{className:w.content,children:(0,x.jsx)("div",{children:(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:w.item,children:[(0,x.jsx)("img",{src:"https://trikky.ru/wp-content/blogs.dir/1/files/2020/08/17/2859972401.jpg",alt:"ava"}),s.message,(0,x.jsx)("div",{children:(0,x.jsx)("span",{children:s.countLikes})})]})})})})},y=t(5783),b=(0,u.memo)((function(s){var e=s.posts.map((function(s){return(0,x.jsx)(k,{message:s.message,countLikes:s.countLikes},s.id)}));return console.log("RENDER"),(0,x.jsxs)("div",{className:g,children:[(0,x.jsx)("h3",{children:"My posts"}),(0,x.jsx)("div",{children:(0,x.jsx)(N,{addNewPost:function(e){s.addNewPostAC(e)}})}),e]})})),N=function(s){var e=(0,y.TA)({initialValues:{newPost:""},validate:function(s){var e={};return s.newPost?s.newPost.length>10&&(e.newPost="Must be 10 characters or less"):e.newPost="Required",e},onSubmit:function(t){s.addNewPost(t.newPost),e.resetForm()}});return console.log(e.errors),(0,x.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("input",{name:"newPost",type:"text",onChange:e.handleChange,onBlur:e.handleBlur,value:e.values.newPost}),e.errors.newPost&&e.touched.newPost&&(0,x.jsx)("div",{style:{color:"red"},children:e.errors.newPost})]}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"submit",disabled:0!==Object.keys(e.errors).length,children:"Add new post"})})]})},_=t(440),S=(0,_.$j)((function(s){return{posts:s.profilePage.posts,newPostText:s.profilePage.newPostText}}),(function(s){return{addPost:function(){s((0,P.Pi)())},updateNewPostText:function(e){s((0,P.fx)(e))},addNewPostAC:function(e){s((0,P.EQ)(e))}}}))(b),U=function(s){return(0,x.jsxs)("div",{className:l.content,children:["Main content",(0,x.jsx)(v,{profile:s.profile,status:s.status,updateUserStatus:s.updateUserStatus,isOwner:s.isOwner,savePhotos:s.savePhotos}),s.isAuth&&(0,x.jsx)(S,{}),!s.isAuth&&(0,x.jsx)("h1",{children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0438 \u0432\u0445\u043e\u0434"})]})},A=t(104),C=t(4479),I=function(s){(0,o.Z)(t,s);var e=(0,a.Z)(t);function t(){return(0,n.Z)(this,t),e.apply(this,arguments)}return(0,i.Z)(t,[{key:"refreshProfile",value:function(){var s=this.props.match.params.userId;void 0===s&&((s=this.props.authorizedUserId)||this.props.history.push("/login")),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s,e,t){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,x.jsx)("div",{children:(0,x.jsx)(U,(0,r.Z)((0,r.Z)({},this.props),{},{profile:this.props.profile,status:this.props.status,isOwner:!this.props.match.params.userId,isAuth:this.props.isAuth,updateUserStatus:this.props.updateUserStatus,savePhotos:this.props.savePhotos}))})}}]),t}(u.Component),Z=(0,C.qC)((0,_.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,isAuth:s.auth.isAuth,authorizedUserId:s.auth.id}}),{getUserProfile:P.et,getUserStatus:P.Tq,updateUserStatus:P.OL,savePhotos:P.kI}),A.EN)(I)}}]);
//# sourceMappingURL=707.c8ce130a.chunk.js.map